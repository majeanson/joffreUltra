(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{653:(e,a,t)=>{Promise.resolve().then(t.bind(t,4280))},1148:(e,a,t)=>{"use strict";t.d(a,{N:()=>r});let r=(0,t(6408).UU)("https://uojzuikytfymkzemneds.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVvanp1aWt5dGZ5bWt6ZW1uZWRzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ2MTM1ODksImV4cCI6MjA3MDE4OTU4OX0.504Hc4dVoILVeOCiDycHfVCMSWchuzLeyOGc1OIkr8w")},4280:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>k});var r=t(4),s=t(8924),l=t(3176),n=t(8347);function i(e){let{className:a,...t}=e;return(0,r.jsx)("div",{"data-slot":"card",className:(0,n.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...t})}function d(e){let{className:a,...t}=e;return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,n.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...t})}function c(e){let{className:a,...t}=e;return(0,r.jsx)("div",{"data-slot":"card-title",className:(0,n.cn)("leading-none font-semibold",a),...t})}function o(e){let{className:a,...t}=e;return(0,r.jsx)("div",{"data-slot":"card-description",className:(0,n.cn)("text-muted-foreground text-sm",a),...t})}function m(e){let{className:a,...t}=e;return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,n.cn)("px-6",a),...t})}function u(e){let{className:a,type:t,...s}=e;return(0,r.jsx)("input",{type:t,"data-slot":"input",className:(0,n.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...s})}var g=t(4574),p=t(1304);let x=(0,p.createServerReference)("400fffcec4071597e1c8b289911c74cb49a7ad50fe",p.callServer,void 0,p.findSourceMapURL,"createGame"),h=(0,p.createServerReference)("404b1f4169b121c268b21c783ed900fbb49029336c",p.callServer,void 0,p.findSourceMapURL,"joinGame"),b=(0,p.createServerReference)("70ff7c8e09a704caaa35d6efde91c89e863a5afa37",p.callServer,void 0,p.findSourceMapURL,"rejoinGame"),y=(0,p.createServerReference)("001c6a37503aa20053cb12023fe024bfa141fb040d",p.callServer,void 0,p.findSourceMapURL,"getAvailableGames");var f=t(1766),v=t(1148);let N=(e,a,t)=>{localStorage.setItem("lastGameId",e),localStorage.setItem("lastPlayerId",a),localStorage.setItem("lastPlayerName",t)},j=()=>{let e=localStorage.getItem("lastGameId"),a=localStorage.getItem("lastPlayerId"),t=localStorage.getItem("lastPlayerName");return e&&a&&t?{gameId:e,playerId:a,playerName:t}:null};function I(){let e=(0,f.useRouter)(),[a,t]=(0,l.useState)(null),[n,i]=(0,l.useState)(!1),d=async e=>{e.preventDefault(),i(!0);let a=new FormData(e.currentTarget);t(await x(a)),i(!1)};return(0,l.useEffect)(()=>{(null==a?void 0:a.success)&&a.gameId&&a.playerId&&a.playerName&&(N(a.gameId,a.playerId,a.playerName),e.push("/game?id=".concat(a.gameId,"&playerId=").concat(a.playerId,"&playerName=").concat(encodeURIComponent(a.playerName))))},[a,e]),(0,r.jsxs)("form",{onSubmit:d,className:"space-y-4",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Create New Game"}),(0,r.jsxs)("div",{children:[(0,r.jsx)(g.J,{htmlFor:"create-game-name",className:"text-gray-300",children:"Game Name"}),(0,r.jsx)(u,{id:"create-game-name",name:"gameName",placeholder:"My Awesome Game",required:!0,className:"bg-gray-700 border-gray-600 text-white placeholder:text-gray-400"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(g.J,{htmlFor:"create-player-name",className:"text-gray-300",children:"Your Name"}),(0,r.jsx)(u,{id:"create-player-name",name:"playerName",placeholder:"Player One",required:!0,className:"bg-gray-700 border-gray-600 text-white placeholder:text-gray-400"})]}),(0,r.jsx)(s.$,{type:"submit",className:"w-full bg-green-600 hover:bg-green-700 text-white",disabled:n,children:n?"Creating...":"Create Game"}),(null==a?void 0:a.message)&&(0,r.jsx)("p",{className:"text-red-400 text-sm",children:a.message})]})}function w(){let e=(0,f.useRouter)(),[a,t]=(0,l.useState)(null),[n,i]=(0,l.useState)(!1),d=async e=>{e.preventDefault(),i(!0);let a=new FormData(e.currentTarget);t(await h(a)),i(!1)};return(0,l.useEffect)(()=>{(null==a?void 0:a.success)&&a.gameId&&a.playerId&&a.playerName&&(N(a.gameId,a.playerId,a.playerName),e.push("/game?id=".concat(a.gameId,"&playerId=").concat(a.playerId,"&playerName=").concat(encodeURIComponent(a.playerName))))},[a,e]),(0,r.jsxs)("form",{onSubmit:d,className:"space-y-4",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Join Existing Game"}),(0,r.jsxs)("div",{children:[(0,r.jsx)(g.J,{htmlFor:"join-game-id",className:"text-gray-300",children:"Game ID"}),(0,r.jsx)(u,{id:"join-game-id",name:"gameId",placeholder:"ABCDEF",required:!0,className:"bg-gray-700 border-gray-600 text-white placeholder:text-gray-400"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(g.J,{htmlFor:"join-player-name",className:"text-gray-300",children:"Your Name"}),(0,r.jsx)(u,{id:"join-player-name",name:"playerName",placeholder:"Player Two",required:!0,className:"bg-gray-700 border-gray-600 text-white placeholder:text-gray-400"})]}),(0,r.jsx)(s.$,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white",disabled:n,children:n?"Joining...":"Join Game"}),(null==a?void 0:a.message)&&(0,r.jsx)("p",{className:"text-red-400 text-sm",children:a.message})]})}function S(){let e=(0,f.useRouter)(),[a,t]=(0,l.useState)(null),[n,i]=(0,l.useState)(null),[d,c]=(0,l.useState)(!1);if((0,l.useEffect)(()=>{t(j())},[]),(0,l.useEffect)(()=>{(null==n?void 0:n.success)&&n.gameId&&n.playerId&&n.playerName&&(N(n.gameId,n.playerId,n.playerName),e.push("/game?id=".concat(n.gameId,"&playerId=").concat(n.playerId,"&playerName=").concat(encodeURIComponent(n.playerName))))},[n,e]),!a)return null;let o=async()=>{a&&(c(!0),i(await b(a.gameId,a.playerId,a.playerName)),c(!1))};return(0,r.jsxs)("div",{className:"border-t border-gray-700 pt-8 space-y-4",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Continue Last Game"}),(0,r.jsxs)("p",{className:"text-gray-400 text-sm",children:["You were last in game ",(0,r.jsx)("span",{className:"font-medium",children:a.gameId})," as ",(0,r.jsx)("span",{className:"font-medium",children:a.playerName}),"."]}),(0,r.jsx)(s.$,{onClick:o,className:"w-full bg-purple-600 hover:bg-purple-700 text-white",disabled:d,children:d?"Rejoining...":"Rejoin Game"}),(null==n?void 0:n.message)&&(0,r.jsx)("p",{className:"text-red-400 text-sm",children:n.message})]})}function k(){let e=(0,f.useRouter)(),[a,t]=(0,l.useState)([]),[n,u]=(0,l.useState)(!0),g=(0,l.useCallback)(async()=>{u(!0);try{let e=await y();t(e)}catch(e){console.error("Error fetching available games:",e),t([])}finally{u(!1)}},[]);(0,l.useEffect)(()=>{g();let e=v.N.channel("public:all_changes_monitor").on("postgres_changes",{event:"*",schema:"public"},e=>{}).subscribe(e=>{}),a=v.N.channel("public:game_rooms").on("postgres_changes",{event:"*",schema:"public",table:"game_rooms"},e=>{g()}).subscribe(e=>{});return()=>{v.N.removeChannel(a),v.N.removeChannel(e)}},[g]);let p=async a=>{var t;a.preventDefault();let r=new FormData(a.currentTarget),s=(null===(t=j())||void 0===t?void 0:t.playerName)||"Guest";r.set("playerName",s);let l=await h(r);l.success&&l.gameId&&l.playerId&&l.playerName?(N(l.gameId,l.playerId,l.playerName),e.push("/game?id=".concat(l.gameId,"&playerId=").concat(l.playerId,"&playerName=").concat(encodeURIComponent(l.playerName)))):l.message&&alert(l.message)};return(0,r.jsx)("div",{className:"flex min-h-screen flex-col items-center justify-center bg-gradient-to-br from-gray-900 to-gray-800 p-4 text-white",children:(0,r.jsxs)(i,{className:"w-full max-w-md bg-gray-800 text-white shadow-lg",children:[(0,r.jsxs)(d,{className:"text-center",children:[(0,r.jsx)(c,{className:"text-3xl font-bold",children:"Trick-Taking Game"}),(0,r.jsx)(o,{className:"text-gray-400",children:"Join a game or create a new one."})]}),(0,r.jsxs)(m,{className:"space-y-8",children:[(0,r.jsx)(I,{}),(0,r.jsx)("div",{className:"border-t border-gray-700 pt-8",children:(0,r.jsx)(w,{})}),(0,r.jsx)(S,{}),(0,r.jsxs)("div",{className:"border-t border-gray-700 pt-8",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:"Available Games"}),n?(0,r.jsx)("p",{className:"text-gray-400",children:"Loading games..."}):0===a.length?(0,r.jsx)("p",{className:"text-gray-400",children:"No active games available. Create one!"}):(0,r.jsx)("ul",{className:"space-y-2",children:a.map(e=>(0,r.jsxs)("li",{className:"bg-gray-700 p-3 rounded-md flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"font-medium",children:[e.name," ",(0,r.jsxs)("span",{className:"text-gray-400 text-sm",children:["(",e.id,")"]})]}),(0,r.jsxs)("p",{className:"text-gray-400 text-sm",children:[e.players.length,"/4 players"]})]}),(0,r.jsxs)("form",{onSubmit:p,children:[(0,r.jsx)("input",{type:"hidden",name:"gameId",value:e.id}),(0,r.jsx)(s.$,{type:"submit",size:"sm",className:"bg-purple-600 hover:bg-purple-700 text-white",children:"Join"})]})]},e.id))})]}),(0,r.jsxs)("div",{className:"border-t border-gray-700 pt-8",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-2 text-white",children:"How to Play"}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:"This is a trick-taking card game. Players play cards in turns, and the highest card of the leading suit (or a trump card) wins the trick. The goal is to win a certain number of tricks or points."})]})]})]})})}},4574:(e,a,t)=>{"use strict";t.d(a,{J:()=>n});var r=t(4);t(3176);var s=t(1348),l=t(8347);function n(e){let{className:a,...t}=e;return(0,r.jsx)(s.b,{"data-slot":"label",className:(0,l.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...t})}},8082:e=>{function a(e){var a=Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}a.keys=()=>[],a.resolve=a,a.id=8082,e.exports=a},8347:(e,a,t)=>{"use strict";t.d(a,{cn:()=>l});var r=t(5894),s=t(7399);function l(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,s.QP)((0,r.$)(a))}},8924:(e,a,t)=>{"use strict";t.d(a,{$:()=>d});var r=t(4);t(3176);var s=t(6369),l=t(4552),n=t(8347);let i=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function d(e){let{className:a,variant:t,size:l,asChild:d=!1,...c}=e,o=d?s.DX:"button";return(0,r.jsx)(o,{"data-slot":"button",className:(0,n.cn)(i({variant:t,size:l,className:a})),...c})}}},e=>{var a=a=>e(e.s=a);e.O(0,[131,476,571,358],()=>a(653)),_N_E=e.O()}]);