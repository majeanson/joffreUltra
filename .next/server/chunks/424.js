exports.id=424,exports.ids=[424],exports.modules={362:(e,t,r)=>{"use strict";r.d(t,{$:()=>i});var a=r(256);r(113);var s=r(3543),n=r(3946),l=r(8629);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function i({className:e,variant:t,size:r,asChild:n=!1,...i}){let c=n?s.DX:"button";return(0,a.jsx)(c,{"data-slot":"button",className:(0,l.cn)(o({variant:t,size:r,className:e})),...i})}},732:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=732,e.exports=t},792:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,3031,23)),Promise.resolve().then(r.t.bind(r,7019,23)),Promise.resolve().then(r.t.bind(r,8335,23)),Promise.resolve().then(r.t.bind(r,6926,23)),Promise.resolve().then(r.t.bind(r,698,23)),Promise.resolve().then(r.t.bind(r,1182,23)),Promise.resolve().then(r.t.bind(r,5020,23)),Promise.resolve().then(r.t.bind(r,7646,23))},1064:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2205,23)),Promise.resolve().then(r.t.bind(r,3757,23)),Promise.resolve().then(r.t.bind(r,1861,23)),Promise.resolve().then(r.t.bind(r,4260,23)),Promise.resolve().then(r.t.bind(r,2508,23)),Promise.resolve().then(r.t.bind(r,9792,23)),Promise.resolve().then(r.t.bind(r,526,23)),Promise.resolve().then(r.t.bind(r,1480,23))},2615:()=>{},4463:()=>{},6391:()=>{},7006:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c,metadata:()=>i});var a=r(5322),s=r(4161),n=r.n(s),l=r(609),o=r.n(l);r(6391);let i={title:"v0 App",description:"Created with v0",generator:"v0.dev"};function c({children:e}){return(0,a.jsxs)("html",{lang:"en",children:[(0,a.jsx)("head",{children:(0,a.jsx)("style",{children:`
html {
  font-family: ${n().style.fontFamily};
  --font-sans: ${n().variable};
  --font-mono: ${o().variable};
}
        `})}),(0,a.jsx)("body",{children:e})]})}},7712:(e,t,r)=>{"use strict";r.d(t,{N:()=>a});let a=(0,r(483).UU)("https://uojzuikytfymkzemneds.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVvanp1aWt5dGZ5bWt6ZW1uZWRzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ2MTM1ODksImV4cCI6MjA3MDE4OTU4OX0.504Hc4dVoILVeOCiDycHfVCMSWchuzLeyOGc1OIkr8w")},8629:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var a=r(1698),s=r(6419);function n(...e){return(0,s.QP)((0,a.$)(e))}},9067:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=9067,e.exports=t},9146:(e,t,r)=>{"use strict";r.d(t,{J:()=>l});var a=r(256);r(113);var s=r(260),n=r(8629);function l({className:e,...t}){return(0,a.jsx)(s.b,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}},9175:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"001c6a37503aa20053cb12023fe024bfa141fb040d":()=>D,"400fffcec4071597e1c8b289911c74cb49a7ad50fe":()=>G,"4020afa920bc98deb862a05790f43d9e29ae9b04de":()=>M,"404b1f4169b121c268b21c783ed900fbb49029336c":()=>N,"4095bc6b59c918eea95ef99a4b7ecbe75ec61e8764":()=>U,"40c784d6f10b4f70694f886d62ee5634a10c608c7c":()=>k,"40d9381e91bfd257fa414203daa9826a97c271192c":()=>J,"70762c95f7c21958d38ae764e0d59aac73f2de7bbd":()=>R,"70e371621bd13ec56636cc2c7c33b46d4f3615726b":()=>j,"70e79bae32fde495f2c752df7d30d35e9b26a75ebe":()=>$,"70ef4c747af4f7de6fa7b1b00037191bcbf468c0ea":()=>_,"70ff7c8e09a704caaa35d6efde91c89e863a5afa37":()=>S,"78a0bffdf7e3fc90f51e5dc40e70779db535cb6a6d":()=>V});var a=r(6896);r(2078);let s=(0,r(5909).UU)("https://uojzuikytfymkzemneds.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVvanp1aWt5dGZ5bWt6ZW1uZWRzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ2MTM1ODksImV4cCI6MjA3MDE4OTU4OX0.504Hc4dVoILVeOCiDycHfVCMSWchuzLeyOGc1OIkr8w");function n(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}var l=r(8461),o=function(e){return e.WAITING="waiting",e.TEAM_SELECTION="team_selection",e.BETS="bets",e.CARDS="cards",e.TRICK_SCORING="trick_scoring",e.ROUND_END="round_end",e.GAME_END="game_end",e}({}),i=function(e){return e.RED="red",e.BLUE="blue",e.GREEN="green",e.BROWN="brown",e}({}),c=function(e){return e.SKIP="skip",e.SEVEN="seven",e.EIGHT="eight",e.NINE="nine",e.TEN="ten",e.ELEVEN="eleven",e.TWELVE="twelve",e}({});let u={skip:0,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12};var d=function(e){return e.A="A",e.B="B",e}({});let f=[0,1,2,3,4,5,6,7],m=["red","blue","green","brown"];function p(e,t,r){if(!function(e,t,r){let a=Object.values(e.players),s=a.filter(e=>e.team===d.A).length,n=a.filter(e=>e.team===d.B).length;return(r!==d.A||!(s>=2))&&(r!==d.B||!(n>=2))}(e,0,r))throw Error("Cannot select this team");return{...e,players:{...e.players,[t]:{...e.players[t],team:r}}}}function g(e,t,r){if(r<0||r>=4||Object.values(e.players).some(e=>e.seatPosition===r))throw Error("Seat is already taken");return{...e,players:{...e.players,[t]:{...e.players[t],seatPosition:r}}}}function b(e,t,r){var a,s,n,l,i,u,d;if(console.log(`DEBUG: [canPlaceBet] Checking bet for Player: ${t}, Bet: ${JSON.stringify(r)}`),console.log(`DEBUG: [canPlaceBet] Current Game State Phase: ${e.phase}, Current Turn: ${e.currentTurn}`),console.log(`DEBUG: [canPlaceBet] Player's existing bet: ${JSON.stringify(e.bets[t])}`),e.currentTurn!==t)return console.log(`DEBUG: [canPlaceBet] Reason: Not player's turn. Current: ${e.currentTurn}, Player: ${t}`),!1;if(e.phase!==o.BETS)return console.log(`DEBUG: [canPlaceBet] Reason: Not in betting phase. Current: ${e.phase}`),!1;if(e.bets[t])return console.log("DEBUG: [canPlaceBet] Reason: Player already placed a bet."),!1;if(!r||void 0===r.betValue||void 0===r.value)return console.log("DEBUG: [canPlaceBet] Reason: Invalid bet object."),!1;let f=Object.values(e.bets).filter(e=>null!=e),m=f.length>0?y(f):null,p=Object.keys(e.bets).filter(t=>void 0!==e.bets[t]).length,g=p===e.turnOrder.length-1;if(console.log(`DEBUG: [canPlaceBet] Highest existing bet: ${m?JSON.stringify(m):"None"}`),console.log(`DEBUG: [canPlaceBet] Bets placed count: ${p}, Total players: ${e.turnOrder.length}, Is last to bet: ${g}`),r.betValue===c.SKIP){let t=(a=f,s=e.turnOrder||[],n=0,!!(Object.keys(l=e.bets).filter(e=>void 0!==l[e]).length!==s.length-1||a.some(e=>e.betValue!==c.SKIP)));return console.log(`DEBUG: [canPlaceBet] Skip bet validation result: ${t}`),t}let b=(i=r,u=m,d=g,u&&u.betValue!==c.SKIP?!!(i.value>u.value)||i.value===u.value&&(!i.trump&&!!u.trump||!!d&&i.trump===u.trump):i.value>=7);return console.log(`DEBUG: [canPlaceBet] Regular bet validation result: ${b}`),b}function h(e,t,r,a){let s={playerId:t,betValue:r,value:u[r],trump:a,timestamp:new Date};if(!b(e,t,s))throw Error("Cannot place this bet");return{...e,bets:{...e.bets,[t]:s}}}function y(e){return 0===e.length?null:e.reduce((e,t)=>{if(t.value>e.value)return t;if(t.value<e.value)return e;if(t.value===e.value){if(!t.trump&&e.trump)return t;t.trump&&e.trump}return e},e[0])}function v(e){let t=e.turnOrder;console.log(`DEBUG: areAllBetsPlaced - Player IDs in turn order: ${t.join(", ")}`),console.log(`DEBUG: areAllBetsPlaced - Current bets: ${JSON.stringify(e.bets,null,2)}`);let r=new Set(Object.keys(e.bets)),a=t.filter(e=>!r.has(e));a.length>0&&console.log(`DEBUG: areAllBetsPlaced - Players still missing bets: ${a.join(", ")}`);let s=t.every(t=>void 0!==e.bets[t]);return console.log(`DEBUG: areAllBetsPlaced - All bets placed: ${s}`),s}function O(e){let t=function(e){let t=[...e];for(let e=t.length-1;e>0;e--){let r=Math.floor(Math.random()*(e+1));[t[e],t[r]]=[t[r],t[e]]}return t}(function(){let e=[],t=0;for(let r of m)for(let a of f)e.push({id:`${r}-${a}-${t++}`,color:r,value:a,playerId:"",trickNumber:0,playOrder:0});return e}()),r={};return e.turnOrder.forEach((e,a)=>{r[e]=[];for(let s=0;s<8;s++){let n={...t[8*a+s],playerId:e};r[e].push(n)}}),{...e,playerHands:r,playedCards:{},wonTricks:e.turnOrder.reduce((e,t)=>({...e,[t]:0}),{})}}function w(e,t,r){if(e.phase!==o.CARDS||e.currentTurn!==t)return!1;let a=e.playerHands[t]||[];if(!a.some(e=>e.id===r.id))return!1;let s=Object.values(e.playedCards).sort((e,t)=>e.playOrder-t.playOrder)[0];if(!s)return!0;let n=s.color,l=e.trump,i=a.filter(e=>e.color===n).length>0,c=l&&r.color===l;return r.color===n||!i||c}function B(e,t,r){if(!w(e,t,r))throw Error("Cannot play this card");let a=(e.playerHands[t]||[]).filter(e=>e.id!==r.id),s=Object.values(e.playedCards),n=s.length+1,l={...r,playOrder:n,trickNumber:e.round},o={...e,playerHands:{...e.playerHands,[t]:a},playedCards:{...e.playedCards,[t]:l}};0===s.length&&o.highestBet?.trump&&(o.trump=r.color);let i=(o.turnOrder.indexOf(t)+1)%o.turnOrder.length;return o.currentTurn=o.turnOrder[i],o}function I(e){return Object.values(e.playedCards).length===e.turnOrder.length}function E(e){return e.turnOrder.every(t=>0===(e.playerHands[t]||[]).length)}function x(e){if(!I(e))throw Error("Trick is not complete");let t=Object.values(e.playedCards).sort((e,t)=>e.playOrder-t.playOrder),r=function(e,t){if(0===e.length)return null;let r=e[0].color;return e.reduce((e,a)=>{let s=e.color===t,n=a.color===t;if(n&&!s)return a;if(!n&&s)return e;let l=e.color===r,o=a.color===r;return o&&!l?a:!o&&l?e:a.value>e.value?a:e},e[0])}(t,e.trump);if(!r)throw Error("No winning card found");let a=r.playerId,s=function(e){let t=1,r=e.some(e=>e.color===i.RED&&0===e.value);return r&&(t+=5),e.some(e=>e.color===i.BROWN&&0===e.value)&&(t+=-3),t}(t),n={...e,wonTricks:{...e.wonTricks,[a]:(e.wonTricks[a]||0)+s},playedCards:{},currentTurn:a,starter:a};return E(n)&&(n.phase=o.TRICK_SCORING),n}function C(e){let{teamAScore:t,teamBScore:r}=function(e){if(!e.highestBet)throw Error("No highest bet found");let t=e.highestBet,r=t.playerId,a=e.players[r].team;if(!a)throw Error("Betting player has no team");let s=Object.values(e.players).filter(e=>e.team===d.A),n=Object.values(e.players).filter(e=>e.team===d.B),l=s.reduce((t,r)=>t+(e.wonTricks[r.id]||0),0),o=n.reduce((t,r)=>t+(e.wonTricks[r.id]||0),0),i=a===d.A?l:o,c=a===d.A?o:l,u=i>=t.value,f=0,m=0;if(u){let e=i-t.value;f=t.value+e*(t.trump?1:2),m=c}else f=-t.value,m=c;return{teamAScore:a===d.A?f:m,teamBScore:a===d.B?f:m,bettingTeamWon:u}}(e),a={...e.scores};Object.values(e.players).forEach(e=>{e.team===d.A?a[e.id]=(a[e.id]||0)+t:e.team===d.B&&(a[e.id]=(a[e.id]||0)+r)});let s=O({...e,scores:a,round:e.round+1,phase:o.BETS,playedCards:{},wonTricks:e.turnOrder.reduce((e,t)=>({...e,[t]:0}),{}),bets:{},highestBet:void 0,trump:void 0}),n=(e.turnOrder.indexOf(e.dealer)+1)%e.turnOrder.length,l=(n+1)%e.turnOrder.length;return s.dealer=e.turnOrder[n],s.starter=e.turnOrder[l],s.currentTurn=s.starter,s}async function P(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZ00123456789",t="";for(let r=0;r<6;r++)t+=e.charAt(Math.floor(Math.random()*e.length));let{data:r}=await s.from("game_rooms").select("id").eq("id",t).single();return r?P():t}function T(e){let t={...e},r=Object.values(t.players),a=r.filter(e=>e.team===d.A).length,s=r.filter(e=>e.team===d.B).length,n=new Set(r.map(e=>e.seatPosition).filter(e=>void 0!==e));for(let e in t.players){let r=t.players[e];if(r.isBot){if(void 0===r.team&&(a<2?t=p(t,r.id,d.A):s<2&&(t=p(t,r.id,d.B))),void 0===t.players[e].seatPosition){for(let e=0;e<4;e++)if(!n.has(e)){t=g(t,r.id,e),n.add(e);break}}let l=t.players[e];l.isReady||void 0===l.team||void 0===l.seatPosition||(t.players[e]={...l,isReady:!0})}}return t}async function A(e){let t={...e},r=t.players[t.currentTurn];if(!r||!r.isBot)return t;if(await new Promise(e=>setTimeout(e,1e3)),t.phase===o.BETS){let e=function(e,t){let r=Object.values(e.bets).filter(e=>null!=e);r.length>0&&y(r);let a=Object.values(u).filter(e=>e>0).sort((e,t)=>e-t),s=Object.keys(e.bets).filter(t=>void 0!==e.bets[t]).length;e.turnOrder.indexOf(t);let n=s===e.turnOrder.length-1,l=r.some(e=>e.betValue!==c.SKIP);if(n&&!l)return{betValue:c.SEVEN,trump:!1};for(let r of a){let a=Object.keys(u).find(e=>u[e]===r);if(!a)continue;let s={betValue:a,value:r,trump:!1};if(b(e,t,s))return{betValue:a,trump:!1};if(b(e,t,s={betValue:a,value:r,trump:!0}))return{betValue:a,trump:!0}}return{betValue:c.SKIP,trump:!1}}(t,r.id);try{t=h(t,r.id,e.betValue,e.trump)}catch(e){throw e}}else if(t.phase===o.CARDS){let e=function(e,t){let r=e.playerHands[t]||[];if(0===r.length)return null;let a=Object.values(e.playedCards).sort((e,t)=>e.playOrder-t.playOrder)[0],s=a?.color,n=e.trump,l=r.filter(r=>w(e,t,r));if(0===l.length)return null;if(!a)return l[Math.floor(Math.random()*l.length)];let o=l.filter(e=>e.color===s);if(o.length>0)return o.sort((e,t)=>t.value-e.value)[0];let i=l.filter(e=>e.color===n);return i.length>0?i.sort((e,t)=>t.value-e.value)[0]:l.sort((e,t)=>e.value-t.value)[0]}(t,r.id);if(e)try{t=B(t,r.id,e),I(t)&&(t=x(t),E(t)&&(t=C(t)))}catch(e){throw e}else throw Error(`ðŸ¤– Bot ${r.name} could not determine a card to play. This indicates a logic error.`)}return t}async function G(e){let t=e.get("gameName"),r=e.get("playerName");if(!t||""===t.trim())return{success:!1,message:"Game name cannot be empty."};if(!r||""===r.trim())return{success:!1,message:"Player name cannot be empty."};try{let e=await P(),a=n(),l={phase:o.WAITING,round:1,currentTurn:"",dealer:"",starter:"",players:{[a]:{id:a,name:r,isReady:!1,isBot:!1}},bets:{},playedCards:{},playerHands:{},wonTricks:{},scores:{[a]:0},turnOrder:[]};l=T(l);let{data:i,error:c}=await s.from("game_rooms").insert({id:e,name:t,state:l}).select().single();if(c)throw c;return{success:!0,gameId:e,playerId:a,playerName:r}}catch(e){return{success:!1,message:`Failed to create game: ${e instanceof Error?e.message:String(e)}`}}}async function N(e){let t=e.get("gameId"),r=e.get("playerName");if(!t||""===t.trim())return{success:!1,message:"Game ID cannot be empty."};if(!r||""===r.trim())return{success:!1,message:"Player name cannot be empty."};try{let{data:e,error:a}=await s.from("game_rooms").select("id, name, state").eq("id",t.toUpperCase()).single();if(a||!e)return{success:!1,message:"Game not found."};let l=e.state,o=Object.values(l.players);if(o.length>=4)return{success:!1,message:"Game is full."};if(o.some(e=>e.name===r))return{success:!1,message:"Player name already taken in this game."};let i=n();l={...l,players:{...l.players,[i]:{id:i,name:r,isReady:!1,isBot:!1}},scores:{...l.scores,[i]:0}},l=T(l);let{error:c}=await s.from("game_rooms").update({state:l}).eq("id",t.toUpperCase());if(c)throw c;return{success:!0,gameId:t,playerId:i,playerName:r}}catch(e){return{success:!1,message:`Failed to join game: ${e instanceof Error?e.message:String(e)}`}}}async function S(e,t,r){if(!e||!t||!r)return{success:!1,message:"Missing game or player information."};try{let{data:a,error:n}=await s.from("game_rooms").select("id, name, state").eq("id",e.toUpperCase()).single();if(n||!a)return{success:!1,message:"Game not found."};let l=a.state;if(!(l.players[t]&&l.players[t].name===r))return{success:!1,message:"Player not found in this game with provided credentials."};return{success:!0,gameId:e,playerId:t,playerName:r}}catch(e){return{success:!1,message:"Failed to rejoin game. Please try again."}}}async function D(){try{let e=new Date,{data:t,error:r}=await s.from("game_rooms").select("id, name, state, created_at").gte("created_at",new Date(e.getTime()-36e5).toISOString()).order("created_at",{ascending:!1});if(r)throw r;return t.filter(e=>e.state.phase===o.WAITING&&Object.keys(e.state.players).length<4).map(e=>({id:e.id,name:e.name,players:Object.values(e.state.players),status:e.state.phase,createdAt:new Date(e.created_at)}))}catch(e){return[]}}async function k(e){try{let{data:t,error:r}=await s.from("game_rooms").select("state").eq("id",e.toUpperCase()).single();if(r)throw r;return t?.state||null}catch(e){return null}}async function U(e){try{let t=await k(e);if(!t)return{success:!1,message:"Game not found."};if(t.phase!==o.WAITING)return{success:!1,message:"Game has already started or finished."};if(Object.values(t.players).length<4)return{success:!1,message:"Need 4 players to start."};if(!function(e){let t=Object.values(e.players);return 4===t.length&&t.every(e=>e.isReady)}(t))return{success:!1,message:"Not all players are ready."};let r=Object.values(t.players).sort((e,t)=>(e.seatPosition||0)-(t.seatPosition||0)).map(e=>e.id);if(4!==r.length)return{success:!1,message:"Invalid seat positions for all players."};let a=r[0],n=r[1],l={...t,turnOrder:r,dealer:a,starter:n,currentTurn:n,phase:o.BETS,round:1,bets:{},highestBet:void 0,trump:void 0,playedCards:{},wonTricks:r.reduce((e,t)=>({...e,[t]:0}),{}),scores:r.reduce((e,t)=>({...e,[t]:0}),{})};l=O(l);let{error:i}=await s.from("game_rooms").update({state:l}).eq("id",e.toUpperCase());if(i)throw i;return{success:!0}}catch(e){return{success:!1,message:"Failed to start game. Please try again."}}}async function j(e,t,r){try{let a=await k(e);if(!a)return{success:!1,message:"Game not found."};let n=(a.playerHands[t]||[]).find(e=>e.id===r);if(!n)return{success:!1,message:"Card not found in your hand."};if(!w(a,t,n))return{success:!1,message:"Invalid card play."};let l=B(a,t,n);I(l)&&(l=x(l),E(l)&&(l=C(l)));let{error:o}=await s.from("game_rooms").update({state:l}).eq("id",e.toUpperCase());if(o)throw o;return{success:!0}}catch(e){return{success:!1,message:`Failed to play card: ${e instanceof Error?e.message:String(e)}`}}}async function $(e,t,r){try{let a=await k(e);if(!a)return{success:!1,message:"Game not found."};if(a.phase!==o.WAITING)return{success:!1,message:"Cannot select team in current phase."};let n=p(a,t,r);n=T(n);let{error:i}=await s.from("game_rooms").update({state:n}).eq("id",e.toUpperCase());if(i)throw i;return(0,l.revalidatePath)("/"),{success:!0}}catch(e){return{success:!1,message:`Failed to select team: ${e instanceof Error?e.message:String(e)}`}}}async function _(e,t,r){try{let a=await k(e);if(!a)return{success:!1,message:"Game not found."};if(a.phase!==o.WAITING)return{success:!1,message:"Cannot select seat in current phase."};let n=g(a,t,r);n=T(n);let{error:i}=await s.from("game_rooms").update({state:n}).eq("id",e.toUpperCase());if(i)throw i;return(0,l.revalidatePath)("/"),{success:!0}}catch(e){return{success:!1,message:`Failed to select seat: ${e instanceof Error?e.message:String(e)}`}}}async function R(e,t,r){try{let a=await k(e);if(!a)return{success:!1,message:"Game not found."};if(a.phase!==o.WAITING)return{success:!1,message:"Cannot change ready status in current phase."};let n=a.players[t];if(!n)return{success:!1,message:"Player not found."};let l={...a.players,[t]:{...n,isReady:r}},i={...a,players:l};i=T(i);let{error:c}=await s.from("game_rooms").update({state:i}).eq("id",e.toUpperCase());if(c)throw c;return{success:!0}}catch(e){return{success:!1,message:`Failed to set ready status: ${e instanceof Error?e.message:String(e)}`}}}async function V(e,t,r,a){try{let n=await k(e);if(!n)return{success:!1,message:"Game not found."};let l=h(n,t,r,a);if(console.log(`DEBUG: In placeBetAction - Checking if all bets are placed. Current phase: ${l.phase}`),console.log(`DEBUG: In placeBetAction - New game state bets: ${JSON.stringify(l.bets,null,2)}`),console.log(`DEBUG: In placeBetAction - New game state turn order: ${l.turnOrder.join(", ")}`),console.log(`DEBUG: In placeBetAction - Result of areAllBetsPlaced: ${v(l)}`),console.log(`DEBUG: In placeBetAction - Bets count: ${Object.keys(l.bets).length}, Turn order length: ${l.turnOrder.length}`),v(l)){let e=y(Object.values(l.bets).filter(e=>null!=e));if(!e)return{success:!1,message:"Could not determine highest bet after all players bet."};l.highestBet=e,l.trump=void 0,l.phase=o.CARDS,l.currentTurn=e.playerId,console.log(`DEBUG: All bets placed. Transitioning to CARDS phase. Highest bettor: ${e.playerId}`)}else{let e=(l.turnOrder.indexOf(t)+1)%l.turnOrder.length;l.currentTurn=l.turnOrder[e],console.log(`DEBUG: Not all bets placed. Moving turn to next player: ${l.currentTurn}`)}let{error:i}=await s.from("game_rooms").update({state:l}).eq("id",e.toUpperCase());if(i)throw i;return{success:!0}}catch(e){return{success:!1,message:`Failed to place bet: ${e instanceof Error?e.message:String(e)}`}}}async function M(e){try{let t=await k(e);if(!t)return{success:!1,message:"Game not found."};if(Object.values(t.players).length>=4)return{success:!1,message:"Game is full, cannot add more bots."};let r=n(),a=`Bot ${Math.floor(1e3*Math.random())}`;t={...t,players:{...t.players,[r]:{id:r,name:a,isReady:!1,isBot:!0}},scores:{...t.scores,[r]:0}},t=T(t);let{error:o}=await s.from("game_rooms").update({state:t}).eq("id",e.toUpperCase());if(o)throw o;return(0,l.revalidatePath)("/"),{success:!0}}catch(e){return{success:!1,message:`Failed to add bot: ${e instanceof Error?e.message:String(e)}`}}}async function J(e){try{let t=await k(e);if(!t)return{success:!1,message:"Game not found."};let r=t.players[t.currentTurn];if(!r||!r.isBot)return{success:!1,message:"It's not a bot's turn."};if(t.bets[r.id]){let a=(t.turnOrder.indexOf(r.id)+1)%t.turnOrder.length;t.currentTurn=t.turnOrder[a];let{error:n}=await s.from("game_rooms").update({state:t}).eq("id",e.toUpperCase());if(n)throw n;return{success:!0,message:"Inconsistent state corrected, turn advanced."}}if(t.phase!==o.BETS&&t.phase!==o.CARDS)return{success:!1,message:"Bots only play in betting or card phases."};let a=await A(t),{error:n}=await s.from("game_rooms").update({state:a}).eq("id",e.toUpperCase());if(n)throw n;return{success:!0}}catch(e){return{success:!1,message:`Failed to trigger bot turn: ${e instanceof Error?e.message:String(e)}`}}}(0,r(9578).D)([G,N,S,D,k,U,j,$,_,R,V,M,J]),(0,a.A)(G,"400fffcec4071597e1c8b289911c74cb49a7ad50fe",null),(0,a.A)(N,"404b1f4169b121c268b21c783ed900fbb49029336c",null),(0,a.A)(S,"70ff7c8e09a704caaa35d6efde91c89e863a5afa37",null),(0,a.A)(D,"001c6a37503aa20053cb12023fe024bfa141fb040d",null),(0,a.A)(k,"40c784d6f10b4f70694f886d62ee5634a10c608c7c",null),(0,a.A)(U,"4095bc6b59c918eea95ef99a4b7ecbe75ec61e8764",null),(0,a.A)(j,"70e371621bd13ec56636cc2c7c33b46d4f3615726b",null),(0,a.A)($,"70e79bae32fde495f2c752df7d30d35e9b26a75ebe",null),(0,a.A)(_,"70ef4c747af4f7de6fa7b1b00037191bcbf468c0ea",null),(0,a.A)(R,"70762c95f7c21958d38ae764e0d59aac73f2de7bbd",null),(0,a.A)(V,"78a0bffdf7e3fc90f51e5dc40e70779db535cb6a6d",null),(0,a.A)(M,"4020afa920bc98deb862a05790f43d9e29ae9b04de",null),(0,a.A)(J,"40d9381e91bfd257fa414203daa9826a97c271192c",null)}};